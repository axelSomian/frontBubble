import{$ as m,$a as _t,A as V,Aa as _e,B as Be,Ba as j,C as ne,D as xe,E as Pe,Ea as fe,F as R,G as c,H as Ze,I as S,Ia as rt,J as T,K as X,L as et,La as at,M as g,N as tt,O as H,Oa as Le,P as d,Pa as me,Q as U,Qa as w,R as oe,Ra as ge,S as Ie,Sa as be,T as ke,Ta as lt,U as Re,Ua as ct,V as o,Va as ve,W as s,Wa as ye,X as h,Xa as dt,Y as Ae,Ya as ut,Z as Fe,Za as ht,_ as y,_a as pt,a as Se,aa as p,ab as ft,b as je,ba as it,bb as mt,c as ze,ca as nt,cb as gt,d as N,da as ot,db as bt,e as We,ea as se,f as Te,fa as re,g as Me,ga as ae,h as I,ha as le,i as Ke,ia as l,j as Q,ja as A,k as qe,ka as k,l as te,la as ce,m as Oe,ma as Y,n as Qe,na as Z,o as Je,oa as ee,p as D,pa as M,q as Xe,qa as O,r as Ce,ra as de,s as B,t as J,u as Ye,ua as ue,v as ie,va as he,w as v,wa as st,x as Ne,xa as G,y as _,ya as $,z as f,za as pe}from"./chunk-NZCLQYR3.js";var kt=["carouselElem"];function Rt(n,r){if(n&1&&h(0,"button",16),n&2){let e=r.index,t=p(2);U("active",e===0),H("data-bs-target","#carouselHouse"+t.house._id)("data-bs-slide-to",e)("aria-label","Slide "+(e+1))}}function At(n,r){if(n&1&&(o(0,"div",17),h(1,"img",18),s()),n&2){let e=r.$implicit,t=r.index,i=p(2);U("active",t===0),c(),d("src",e,R)("alt","Image de "+i.house.title)}}function Ft(n,r){if(n&1){let e=y();o(0,"div",6,0)(2,"div",7),g(3,Rt,1,5,"button",8),s(),o(4,"div",9),g(5,At,2,4,"div",10),s(),o(6,"button",11),m("click",function(i){return _(e),f(i.stopPropagation())}),h(7,"span",12),o(8,"span",13),l(9,"Previous"),s()(),o(10,"button",14),m("click",function(i){return _(e),f(i.stopPropagation())}),h(11,"span",15),o(12,"span",13),l(13,"Next"),s()()()}if(n&2){let e=p();d("id","carouselHouse"+e.house._id),c(3),d("ngForOf",e.house.imageUrl),c(2),d("ngForOf",e.house.imageUrl),c(),H("data-bs-target","#carouselHouse"+e.house._id),c(4),H("data-bs-target","#carouselHouse"+e.house._id)}}var vt=(()=>{class n{house;carouselRef;ngAfterViewInit(){this.carouselRef?.nativeElement&&new bootstrap.Carousel(this.carouselRef.nativeElement)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["app-house-item"]],viewQuery:function(t,i){if(t&1&&se(kt,5),t&2){let a;re(a=ae())&&(i.carouselRef=a.first)}},inputs:{house:"house"},decls:8,vars:8,consts:[["carouselElem",""],[1,"card","border-0","rounded-4","overflow-hidden",3,"routerLink"],["class","carousel slide h-100","data-bs-ride","false","data-bs-interval","false",3,"id",4,"ngIf"],[1,"card-body","py-3","text-center"],[1,"text-muted","mb-1","small"],[1,"fw-bold","text-primary","mb-0","fs-6"],["data-bs-ride","false","data-bs-interval","false",1,"carousel","slide","h-100",3,"id"],[1,"carousel-indicators"],["type","button",3,"active",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-slide","prev",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-slide","next",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],["type","button"],[1,"carousel-item"],[1,"d-block","w-100","img-fluid","object-fit-cover",2,"height","220px",3,"src","alt"]],template:function(t,i){t&1&&(o(0,"div",1),g(1,Ft,14,5,"div",2),o(2,"div",3)(3,"p",4),l(4),s(),o(5,"p",5),l(6),M(7,"number"),s()()()),t&2&&(ot("routerLink","/houses/",i.house._id,""),c(),d("ngIf",i.house.imageUrl==null?null:i.house.imageUrl.length),c(3),ce(" ",i.house.type," - ",i.house.neighboorhood," "),c(2),k(" ",O(7,6,i.house.price)," FCFA "))},dependencies:[j,G,$,_e,at],styles:[`.img-height[_ngcontent-%COMP%]{height:150x;object-fit:cover}.carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background-color:#999}
/*# sourceMappingURL=/house-item.component-67FO53OL.css.map */`]})}return n})();var z={production:!1,apiUrl:"https://backbubble-com.onrender.com/api",modeName:"\u{1F7E2} Production"};var W=(()=>{class n{http;apiUrl=z.apiUrl;constructor(e){this.http=e}getHouses(){return this.http.get(`${this.apiUrl}/houses`)}getHouseById(e){return console.log(`Fetching house with ID: ${e}`),this.http.get(`${this.apiUrl}/houses/${e}`)}addHouse(e){return this.http.post(`${this.apiUrl}/houses`,e)}searchHouses(e){let t=e;return console.log("Filters received in service:",e),e.value&&(t.value=e.value),e.city&&(t.city=e.city),e.type&&(t.type=e.type),e.maxPrice&&(t.maxPrice=e.maxPrice.toString()),console.log("Params being sent:",t),this.http.get(`${this.apiUrl}/houses/search`,{params:t})}static \u0275fac=function(t){return new(t||n)(ie(fe))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ht(n,r){n&1&&h(0,"span",15)}function Ut(n,r){if(n&1){let e=y();o(0,"div",6)(1,"div",7)(2,"input",8),ee("ngModelChange",function(i){_(e);let a=p();return Z(a.filters.place,i)||(a.filters.place=i),f(i)}),m("keyup.enter",function(){_(e);let i=p();return f(i.search())}),s()(),o(3,"button",9),m("click",function(){_(e);let i=p();return f(i.search())}),g(4,Ht,1,0,"span",10),l(5," Rechercher "),s(),o(6,"button",11),m("click",function(){_(e);let i=p();return f(i.expandFilters=!0)}),o(7,"span",12),h(8,"i",13),o(9,"span",14),l(10," recherche avanc\xE9s "),s()()()()}if(n&2){let e=p();c(2),Y("ngModel",e.filters.place),c(),d("disabled",e.loading),c(),d("ngIf",e.loading)}}function Gt(n,r){n&1&&h(0,"span",15)}function $t(n,r){if(n&1){let e=y();o(0,"div",16),m("clickOutside",function(){_(e);let i=p();return f(i.expandFilters=!1)}),o(1,"form",17),m("ngSubmit",function(){_(e);let i=p();return f(i.search())}),o(2,"div",18)(3,"label",19),l(4,"Ville"),s(),o(5,"input",20),ee("ngModelChange",function(i){_(e);let a=p();return Z(a.filters.place,i)||(a.filters.place=i),f(i)}),s()(),o(6,"div",18)(7,"label",19),l(8,"Type de logement"),s(),o(9,"select",21),ee("ngModelChange",function(i){_(e);let a=p();return Z(a.filters.type,i)||(a.filters.type=i),f(i)}),o(10,"option",22),l(11,"Tous"),s(),o(12,"option",23),l(13,"Villa"),s(),o(14,"option",24),l(15,"Appartement"),s(),o(16,"option",25),l(17,"Studio"),s(),o(18,"option",26),l(19,"Chambre"),s()()(),o(20,"div",18)(21,"label",19),l(22,"Prix max"),s(),o(23,"input",27),ee("ngModelChange",function(i){_(e);let a=p();return Z(a.filters.maxPrice,i)||(a.filters.maxPrice=i),f(i)}),s()(),o(24,"div",28)(25,"button",29),g(26,Gt,1,0,"span",10),l(27," Rechercher "),s(),o(28,"button",30),m("click",function(){_(e);let i=p();return f(i.resetSearch())}),l(29," X "),s(),o(30,"button",31),m("click",function(){_(e);let i=p();return f(i.expandFilters=!1)}),l(31," Fermer "),s()()()()}if(n&2){let e=p();c(5),Y("ngModel",e.filters.place),c(4),Y("ngModel",e.filters.type),c(14),Y("ngModel",e.filters.maxPrice),c(2),d("disabled",e.loading),c(),d("ngIf",e.loading),c(2),d("hidden",!(e.filters.place||e.filters.type||e.filters.maxPrice))}}function jt(n,r){if(n&1&&(o(0,"div"),l(1),s()),n&2){let e=p(2).ngIf;c(),k(" ",e.length," logement(s) trouv\xE9(s) ")}}function zt(n,r){if(n&1&&(o(0,"div",36),g(1,jt,2,1,"div",37),s()),n&2){let e=p().ngIf;c(),d("ngIf",e.length>0)}}function Wt(n,r){if(n&1&&h(0,"app-house-item",35),n&2){let e=r.$implicit;d("house",e)}}function Kt(n,r){if(n&1&&(o(0,"div",32),g(1,zt,2,1,"div",33),o(2,"div",34),ke(3,Wt,1,1,"app-house-item",35,Ie),s()()),n&2){let e=r.ngIf,t=p();c(),d("ngIf",t.isSearched),c(2),Re(e)}}function qt(n,r){if(n&1&&(o(0,"div",38)(1,"div",39),l(2," Aucun logement trouv\xE9 pour ces crit\xE8res. "),s()()),n&2){let e=r.ngIf;d("hidden",e.length>0)}}var yt=(()=>{class n{houseService;filters={place:"",type:"",maxPrice:null};isSearched=!1;expandFilters=!1;loading=!1;houses$;mode=z.modeName;searchTerm="";errorMessage=null;constructor(e){this.houseService=e}ngOnInit(){this.search()}search(){this.loading=!0;let{place:e,type:t,maxPrice:i}=this.filters;e&&e.trim()!==""||t&&t.trim()!==""||i!=null&&i!==0?(console.log("Searching with filters:",this.filters),this.houses$=this.houseService.searchHouses(this.filters),this.isSearched=!0):this.houses$=this.houseService.getHouses(),setTimeout(()=>this.loading=!1,400)}resetSearch(){this.filters={place:"",type:"",maxPrice:null},this.search(),this.isSearched=!1}static \u0275fac=function(t){return new(t||n)(S(W))};static \u0275cmp=T({type:n,selectors:[["app-house-list"]],decls:8,vars:8,consts:[[1,"container","mt-2"],["class","minimal-searching d-flex align-items-center gap-2",4,"ngIf"],["class","card p-3 mt-2 shadow-sm rounded-4 border-0 animate__animated animate__fadeInDown",3,"clickOutside",4,"ngIf"],[1,"container-l","mx-3"],["class","mt-4",4,"ngIf"],["class","mt-4",3,"hidden",4,"ngIf"],[1,"minimal-searching","d-flex","align-items-center","gap-2"],[1,"flex-grow-1","position-relative"],["type","search","placeholder","\u{1F50D} Rechercher un logement...","name","place",1,"form-control","rounded-pill","ps-5",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary","rounded-pill","px-4","d-none","d-sm-block",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"btn","btn-outline-secondary","rounded-pill",3,"click"],[1,"d-flex","align-items-center","gap-2"],[1,"fa-solid","fa-magnifying-glass-plus"],[1,"d-none","d-l-block"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"card","p-3","mt-2","shadow-sm","rounded-4","border-0","animate__animated","animate__fadeInDown",3,"clickOutside"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-4"],[1,"form-label","fw-semibold"],["type","text","name","place","placeholder","Ex: Abidjan, Yamoussoukro...",1,"form-control",3,"ngModelChange","ngModel"],["name","type",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","Villa"],["value","Appartement"],["value","Studio"],["value","Chambre"],["type","number","name","maxPrice","placeholder","Ex: 150000 FCFA",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","rounded-pill","px-4",3,"disabled"],["type","button",1,"btn","btn-outline-secondary","rounded-pill",3,"click","hidden"],["type","button",1,"btn","btn-outline-danger","rounded-pill",3,"click"],[1,"mt-4"],["class","mb-3 fw-semibold",4,"ngIf"],[1,"row","g-4"],[1,"col-12","col-sm-6","col-md-4","col-xl-3","mb-4","col-xxl-2",3,"house"],[1,"mb-3","fw-semibold"],[4,"ngIf"],[1,"mt-4",3,"hidden"],[1,"alert","alert-warning","text-center","rounded-pill"]],template:function(t,i){t&1&&(o(0,"div",0),g(1,Ut,11,3,"div",1)(2,$t,32,6,"div",2),s(),o(3,"div",3),g(4,Kt,5,1,"div",4),M(5,"async"),g(6,qt,3,1,"div",5),M(7,"async"),s()),t&2&&(c(),d("ngIf",!i.expandFilters),c(),d("ngIf",i.expandFilters),c(2),d("ngIf",O(5,4,i.houses$)),c(2),d("ngIf",O(7,6,i.houses$)))},dependencies:[j,$,pe,vt,gt,ve,_t,ft,me,ye,pt,ge,be,ct,lt],styles:[`.search-bar[_ngcontent-%COMP%]{width:50%;height:40px;min-width:300px;margin:0 auto 30px}
/*# sourceMappingURL=/house-list.component-75VIHGUI.css.map */`]})}return n})();var wt=(()=>{class n{transform(e){let t=e.replace(/\D/g,"");return`+225 ${(t.startsWith("225")?t.substring(3):t).match(/.{1,2}/g)?.join(" ")??e}`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=et({name:"ciPhoneFormat",type:n,pure:!0})}return n})();var Jt=["*"];var Xt=["dialog"];var Et={animation:!0,transitionTimerDelayMs:5},Yt=(()=>{class n{constructor(){this.animation=Et.animation}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zt(n){let{transitionDelay:r,transitionDuration:e}=window.getComputedStyle(n),t=parseFloat(r),i=parseFloat(e);return(t+i)*1e3}function Dt(n){return typeof n=="string"}function He(n){return n!=null}function ei(n){return n&&n.then}function St(n){return(n||document.body).getBoundingClientRect()}function ti(n){return r=>new ze(e=>{let t=u=>n.run(()=>e.next(u)),i=u=>n.run(()=>e.error(u)),a=()=>n.run(()=>e.complete());return r.subscribe({next:t,error:i,complete:a})})}var ii=()=>{},{transitionTimerDelayMs:ni}=Et,we=new Map,L=(n,r,e,t)=>{let i=t.context||{},a=we.get(r);if(a)switch(t.runningTransition){case"continue":return We;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),we.delete(r)}let u=e(r,t.animation,i)||ii;if(!t.animation||window.getComputedStyle(r).transitionProperty==="none")return n.run(()=>u()),Te(void 0).pipe(ti(n));let b=new N,E=new N,C=b.pipe(Qe(!0));we.set(r,{transition$:b,complete:()=>{E.next(),E.complete()},context:i});let q=Zt(r);return n.runOutsideAngular(()=>{let P=I(r,"transitionend").pipe(D(C),Q(({target:Pt})=>Pt===r)),F=Ke(q+ni).pipe(D(C));qe(F,P,E).pipe(D(C)).subscribe(()=>{we.delete(r),n.run(()=>{u(),b.next(),b.complete()})})}),b.asObservable()};var Jn=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,r=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||r()):!1})();var oi=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Tt(n){let r=Array.from(n.querySelectorAll(oi)).filter(e=>e.tabIndex!==-1);return[r[0],r[r.length-1]]}var si=(n,r,e,t=!1)=>{n.runOutsideAngular(()=>{let i=I(r,"focusin").pipe(D(e),Me(a=>a.target));I(r,"keydown").pipe(D(e),Q(a=>a.key==="Tab"),Ce(i)).subscribe(([a,u])=>{let[b,E]=Tt(r);(u===b||u===r)&&a.shiftKey&&(E.focus(),a.preventDefault()),u===E&&!a.shiftKey&&(b.focus(),a.preventDefault())}),t&&I(r,"click").pipe(D(e),Ce(i),Me(a=>a[1])).subscribe(a=>a.focus())})};var Xn=new Date(1882,10,12),Yn=new Date(2174,10,25);var Zn=1e3*60*60*24;var $e=1080,ri=24*$e,ai=12*$e+793,eo=29*ri+ai,to=11*$e+204;var li=(()=>{class n{constructor(){this._ngbConfig=v(Yt),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),K=class{constructor(r,e,t){this.nodes=r,this.viewRef=e,this.componentRef=t}};var ci=(()=>{class n{constructor(){this._document=v(he)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),t=this._document.body,i=t.style,{overflow:a,paddingRight:u}=i;if(e>0){let b=parseFloat(window.getComputedStyle(t).paddingRight);i.paddingRight=`${b+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=u),i.overflow=a}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),di=(()=>{class n{constructor(){this._nativeElement=v(xe).nativeElement,this._zone=v(ne),this._injector=v(V)}ngOnInit(){Pe({mixedReadWrite:()=>L(this._zone,this._nativeElement,(e,t)=>{t&&St(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return L(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=T({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){t&2&&(oe("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),U("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2})}}return n})(),Ee=class{update(r){}close(r){}dismiss(r){}},ui=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],hi=["animation","backdropClass"],Ue=class{_applyWindowOptions(r,e){ui.forEach(t=>{He(e[t])&&(r[t]=e[t])})}_applyBackdropOptions(r,e){hi.forEach(t=>{He(e[t])&&(r[t]=e[t])})}update(r){this._applyWindowOptions(this._windowCmptRef.instance,r),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,r)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(D(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(D(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(r,e,t,i){this._windowCmptRef=r,this._contentRef=e,this._backdropCmptRef=t,this._beforeDismiss=i,this._closed=new N,this._dismissed=new N,this._hidden=new N,r.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,u)=>{this._resolve=a,this._reject=u}),this.result.then(null,()=>{})}close(r){this._windowCmptRef&&(this._closed.next(r),this._resolve(r),this._removeModalElements())}_dismiss(r){this._dismissed.next(r),this._reject(r),this._removeModalElements()}dismiss(r){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(r);else{let e=this._beforeDismiss();ei(e)?e.then(t=>{t!==!1&&this._dismiss(r)},()=>{}):e!==!1&&this._dismiss(r)}}_removeModalElements(){let r=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Te(void 0);r.subscribe(()=>{let{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),te(r,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Ge=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(Ge||{}),pi=(()=>{class n{constructor(){this._document=v(he),this._elRef=v(xe),this._zone=v(ne),this._injector=v(V),this._closed$=new N,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new Be,this.shown=new N,this.hidden=new N}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Dt(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,Pe({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},i=L(this._zone,e,()=>e.classList.remove("show"),t),a=L(this._zone,this._dialogEl.nativeElement,()=>{},t),u=te(i,a);return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){let e={animation:this.animation,runningTransition:"continue"},t=L(this._zone,this._elRef.nativeElement,(a,u)=>{u&&St(a),a.classList.add("show")},e),i=L(this._zone,this._dialogEl.nativeElement,()=>{},e);te(t,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{I(e,"keydown").pipe(D(this._closed$),Q(i=>i.key==="Escape")).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Ge.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let t=!1;I(this._dialogEl.nativeElement,"mousedown").pipe(D(this._closed$),Xe(()=>t=!1),Je(()=>I(e,"mouseup").pipe(D(this._closed$),Oe(1))),Q(({target:i})=>e===i)).subscribe(()=>{t=!0}),I(e,"click").pipe(D(this._closed$)).subscribe(({target:i})=>{e===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!t&&this._zone.run(()=>this.dismiss(Ge.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let t=e.querySelector("[ngbAutofocus]"),i=Tt(e)[0];(t||i||e).focus()}}_restoreFocus(){let e=this._document.body,t=this._elWithFocus,i;t&&t.focus&&e.contains(t)?i=t:i=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&L(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=T({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(t&1&&se(Xt,7),t&2){let a;re(a=ae())&&(i._dialogEl=a.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(t,i){t&2&&(H("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),oe("modal d-block"+(i.windowClass?" "+i.windowClass:"")),U("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Jt,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(t,i){t&1&&(it(),o(0,"div",1,0)(2,"div",2),nt(3),s()()),t&2&&oe("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),_i=(()=>{class n{constructor(){this._applicationRef=v(tt),this._injector=v(V),this._environmentInjector=v(Ne),this._document=v(he),this._scrollBar=v(ci),this._activeWindowCmptHasChanged=new N,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Be;let e=v(ne);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let t=this._windowCmpts[this._windowCmpts.length-1];si(e,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,t,i){let a=i.container instanceof HTMLElement?i.container:He(i.container)?this._document.querySelector(i.container):this._document.body;if(!a)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let u=new Ee;e=i.injector||e;let b=e.get(Ne,null)||this._environmentInjector,E=this._getContentRef(e,b,t,u,i),C=i.backdrop!==!1?this._attachBackdrop(a):void 0,q=this._attachWindowComponent(a,E.nodes),P=new Ue(q,E,C,i.beforeDismiss);return this._registerModalRef(P),this._registerWindowCmpt(q),P.hidden.pipe(Oe(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),u.close=F=>{P.close(F)},u.dismiss=F=>{P.dismiss(F)},u.update=F=>{P.update(F)},P.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),C&&C.instance&&C.changeDetectorRef.detectChanges(),q.changeDetectorRef.detectChanges(),P}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let t=ue(di,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(t.hostView),e.appendChild(t.location.nativeElement),t}_attachWindowComponent(e,t){let i=ue(pi,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:t});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_getContentRef(e,t,i,a,u){return i?i instanceof Ze?this._createFromTemplateRef(i,a):Dt(i)?this._createFromString(i):this._createFromComponent(e,t,i,a,u):new K([])}_createFromTemplateRef(e,t){let i={$implicit:t,close(u){t.close(u)},dismiss(u){t.dismiss(u)}},a=e.createEmbeddedView(i);return this._applicationRef.attachView(a),new K([a.rootNodes],a)}_createFromString(e){let t=this._document.createTextNode(`${e}`);return new K([[t]])}_createFromComponent(e,t,i,a,u){let b=V.create({providers:[{provide:Ee,useValue:a}],parent:e}),E=ue(i,{environmentInjector:t,elementInjector:b}),C=E.location.nativeElement;return u.scrollable&&C.classList.add("component-host-scrollable"),this._applicationRef.attachView(E.hostView),new K([[C]],E.hostView,E)}_setAriaHidden(e){let t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(i=>{i!==e&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let t=()=>{let i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Mt=(()=>{class n{constructor(){this._injector=v(V),this._modalStack=v(_i),this._config=v(li)}open(e,t={}){let i=Se(je(Se({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var io=new Ye("live announcer delay",{providedIn:"root",factory:()=>100});function mi(n,r){if(n&1){let e=y();o(0,"div",7)(1,"h5",8),h(2,"i",9),l(3," Appeler le client "),s(),o(4,"button",10),m("click",function(){let i=_(e).$implicit;return f(i.dismiss())}),s()(),o(5,"div",11)(6,"p"),l(7,"Vous pouvez contacter le propri\xE9taire au :"),s(),o(8,"h4",12),l(9),M(10,"ciPhoneFormat"),s()(),o(11,"div",13)(12,"button",14),m("click",function(){let i=_(e).$implicit;return f(i.close())}),l(13,"Fermer"),s()()}if(n&2){let e=p();c(9),A(O(10,1,e.owner.phone))}}function gi(n,r){if(n&1){let e=y();o(0,"div",7)(1,"h5",8),h(2,"i",15),l(3," Envoyer un message "),s(),o(4,"button",10),m("click",function(){let i=_(e).$implicit;return f(i.dismiss())}),s()(),o(5,"div",11)(6,"p"),l(7,"Vous pouvez envoyer un SMS au propri\xE9taire :"),s(),o(8,"h4",16),l(9),M(10,"ciPhoneFormat"),s()(),o(11,"div",13)(12,"button",14),m("click",function(){let i=_(e).$implicit;return f(i.close())}),l(13,"Fermer"),s()()}if(n&2){let e=p();c(9),A(O(10,1,e.owner.phone))}}var Ot=(()=>{class n{modalService;owner;house;constructor(e){this.modalService=e}isMobile(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)}callOwner(e){let t=this.owner.phone.replace(/\s+/g,"");this.isMobile()?window.location.href=`tel:${t}`:this.modalService.open(e)}sendSMS(e){let t=this.owner.phone.replace(/\s+/g,""),a=`${window.location.origin}/houses/${this.house._id}`,u=encodeURIComponent(`Bonjour M/Mme ${this.owner.firstName}, je suis int\xE9ress\xE9 par votre annonce:${a}. Merci de me contacter au plus vite.`),b=`sms:${t}?body=${u}`;this.isMobile()?window.location.href=b:this.modalService.open(e)}static \u0275fac=function(t){return new(t||n)(S(Mt))};static \u0275cmp=T({type:n,selectors:[["app-owner-contact"]],inputs:{owner:"owner",house:"house"},decls:11,vars:0,consts:[["callModal",""],["smsModal",""],[1,"d-flex","flex-column","gap-2"],[1,"btn","btn-primary","w-100",3,"click"],[1,"fa-solid","fa-phone","me-2"],[1,"btn","btn-success","w-100",3,"click"],[1,"fa-solid","fa-message","me-2"],[1,"modal-header"],[1,"modal-title"],[1,"fa-solid","fa-phone","me-2","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","text-center"],[1,"text-primary"],[1,"modal-footer","justify-content-center"],[1,"btn","btn-secondary",3,"click"],[1,"fa-solid","fa-message","me-2","text-success"],[1,"text-success"]],template:function(t,i){if(t&1){let a=y();o(0,"div",2)(1,"button",3),m("click",function(){_(a);let b=le(8);return f(i.callOwner(b))}),h(2,"i",4),l(3," Appeler le propri\xE9taire "),s(),o(4,"button",5),m("click",function(){_(a);let b=le(10);return f(i.sendSMS(b))}),h(5,"i",6),l(6," Envoyer un SMS "),s()(),g(7,mi,14,3,"ng-template",null,0,de)(9,gi,14,3,"ng-template",null,1,de)}},dependencies:[wt],encapsulation:2})}return n})();var De=(()=>{class n{http;apiUrl=z.apiUrl+"/owners";constructor(e){this.http=e}getOwnerById(e){return this.http.get(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||n)(ie(fe))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bi(n,r){n&1&&h(0,"i",44)}function vi(n,r){n&1&&h(0,"i",45)}function yi(n,r){n&1&&h(0,"i",46)}function wi(n,r){if(n&1&&(Ae(0),g(1,bi,1,0,"i",41)(2,vi,1,0,"i",42)(3,yi,1,0,"i",43),Fe()),n&2){let e=r.$implicit;c(),d("ngIf",e==="full"),c(),d("ngIf",e==="half"),c(),d("ngIf",e==="empty")}}function Ei(n,r){if(n&1&&(o(0,"div",39),g(1,wi,4,3,"ng-container",40),s()),n&2){let e=p().ngIf,t=p();c(),d("ngForOf",t.getStars(e.notation))}}function Di(n,r){if(n&1){let e=y();o(0,"div",47)(1,"img",48),m("click",function(){let i=_(e).$implicit,a=p(2);return f(a.openImage(i))}),s()()}if(n&2){let e=r.$implicit;c(),d("src",e,R)}}function Si(n,r){if(n&1){let e=y();o(0,"div",49)(1,"img",50),m("click",function(){let i=_(e).$implicit,a=p(2);return f(a.openImage(i))}),s()()}if(n&2){let e=r.$implicit;c(),d("src",e,R)}}function Ti(n,r){if(n&1&&(o(0,"div",51)(1,"div",52),h(2,"img",53),o(3,"h5"),l(4),s(),o(5,"p",54),h(6,"i",55),l(7,"H\xF4te v\xE9rifi\xE9 "),s(),o(8,"div",56),h(9,"app-owner-contact",57),s()()()),n&2){let e=r.ngIf,t=p().ngIf;c(2),d("src",e.profileimageUrl,R),c(2),A(`${e.firstName} ${e.lastName}`),c(5),d("owner",e)("house",t)}}function Mi(n,r){if(n&1&&(o(0,"li",64),h(1,"i",65),o(2,"span",66),l(3),s()()),n&2){let e=r.$implicit,t=p(3);c(),d("ngClass",t.getEquipmentIcon(e)),c(2),A(e)}}function Oi(n,r){if(n&1&&(o(0,"div",58)(1,"h4",59),l(2,"\xC9quipements"),s(),o(3,"div",60)(4,"div",61)(5,"ul",62),g(6,Mi,4,2,"li",63),s()()()()),n&2){let e=p().ngIf;c(6),d("ngForOf",e.equipments)}}function Ci(n,r){if(n&1){let e=y();o(0,"div",1)(1,"div",2)(2,"h2"),l(3),s(),o(4,"p",3),l(5),M(6,"number"),s(),o(7,"p",4),h(8,"i",5),l(9),s(),o(10,"div",6)(11,"span",7),h(12,"i",8),l(13),s(),g(14,Ei,2,1,"div",9),s(),o(15,"div",10)(16,"div",11)(17,"img",12),m("click",function(){let i=_(e).ngIf,a=p();return f(a.openImage(i.imageUrl[0]))}),s()(),o(18,"div",11)(19,"div",13),g(20,Di,2,1,"div",14),s()()()(),o(21,"button",15),l(22," Voir toutes les photos "),s(),o(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"h5",20),l(28,"Galerie compl\xE8te"),s(),h(29,"button",21),s(),o(30,"div",22)(31,"div",13),g(32,Si,2,1,"div",23),s()()()()(),o(33,"div",24)(34,"div",25)(35,"div",26)(36,"div",27),h(37,"button",28),s(),o(38,"div",29)(39,"button",30),m("click",function(){_(e);let i=p();return f(i.previousImage())}),h(40,"i",31),s(),h(41,"img",32),o(42,"button",33),m("click",function(){_(e);let i=p();return f(i.nextImage())}),h(43,"i",34),s()()()()(),o(44,"div",35)(45,"div",36)(46,"h4"),l(47,"Description"),s(),l(48),s(),g(49,Ti,10,4,"div",37),M(50,"async"),s(),g(51,Oi,7,1,"div",38),s()}if(n&2){let e=r.ngIf,t=p();c(3),A(e==null?null:e.title),c(2),k(" ",O(6,13,e==null?null:e.price),` FCFA / nuit
`),c(4),ce(" ",e==null?null:e.neighboorhood,", ",e==null?null:e.city," \u2013 C\xF4te d\u2019Ivoire "),c(4),k(" ",e==null?null:e.rooms," "),c(),d("ngIf",e.notation),c(3),d("src",e.imageUrl[0],R),c(3),d("ngForOf",e.imageUrl.slice(1,5)),c(12),d("ngForOf",t.imageList),c(9),d("src",t.selectedImage,R),c(7),k(" ",e==null?null:e.description," "),c(),d("ngIf",O(50,15,t.owner$)),c(2),d("ngIf",e.equipments.length>0)}}var Nt=(()=>{class n{houseservice;ownerservice;route;house$;owner$;houseEqp;imageList=[];selectedImage="";selectedIndex=0;constructor(e,t,i){this.houseservice=e,this.ownerservice=t,this.route=i}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(!e){console.error("House ID not found in route parameters");return}this.house$=this.houseservice.getHouseById(e),console.log("House ID:",e),this.house$.subscribe(t=>{this.houseEqp=t.equipments,this.imageList=t.imageUrl,console.log("id owner:",t.idOwner),this.owner$=this.ownerservice.getOwnerById(t.idOwner)})}ngAfterViewInit(){let e=document.getElementById("fullscreenImageModal");e&&e.addEventListener("hidden.bs.modal",()=>{let t=document.getElementById("photosModal");if(t){let i=window.bootstrap.Modal;new i(t).show()}})}openImage(e){this.selectedImage=e,this.selectedIndex=this.imageList.indexOf(e);let t=document.getElementById("fullscreenImageModal");if(t){let i=window.bootstrap.Modal;new i(t).show()}}nextImage(){this.imageList.length!==0&&(this.selectedIndex=(this.selectedIndex+1)%this.imageList.length,this.selectedImage=this.imageList[this.selectedIndex])}previousImage(){this.imageList.length!==0&&(this.selectedIndex=(this.selectedIndex-1+this.imageList.length)%this.imageList.length,this.selectedImage=this.imageList[this.selectedIndex])}getEquipmentIcon(e){let t=e.toLowerCase();return t.includes("wifi")?"fa-solid fa-wifi":t.includes("clim")?"fa-solid fa-snowflake":t.includes("cuisine")?"fa-solid fa-kitchen-set":t.includes("bain")?"fa-solid fa-bath":t.includes("douche")?"fa-solid fa-shower":t.includes("tv")||t.includes("t\xE9l\xE9")?"fa-solid fa-tv":t.includes("piscine")?"fa-solid fa-water-ladder":t.includes("machine")?"fa-solid fa-soap":"fa-solid fa-circle-check"}getStars(e){let t=[],i=Math.floor(e),a=e%1>=.5;for(let u=0;u<i;u++)t.push("full");for(a&&t.push("half");t.length<5;)t.push("empty");return t}static \u0275fac=function(t){return new(t||n)(S(W),S(De),S(rt))};static \u0275cmp=T({type:n,selectors:[["app-house-details"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"house-header","my-4"],[1,"fs-4","fw-semibold","text-success","mb-1"],[1,"text-muted"],[1,"fa-solid","fa-location-dot","me-1"],[1,"d-flex","align-items-center","justify-content-between","mb-4"],[1,"badge","bg-secondary"],[1,"fa-solid","fa-bed"],["class","rating ms-auto",4,"ngIf"],[1,"row","g-2","mb-4"],[1,"col-md-6"],["alt","Photo principale",1,"img-fluid","imgP","rounded",3,"click","src"],[1,"row","g-2"],["class","col-6",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#photosModal",1,"btn","btn-outline-secondary","mt-0","mb-5"],["id","photosModal","tabindex","-1","aria-labelledby","photosModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Fermer",1,"btn-close"],[1,"modal-body"],["class","col-6 col-md-4",4,"ngFor","ngForOf"],["id","fullscreenImageModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-fullscreen"],[1,"modal-content","bg-dark"],[1,"modal-header","border-0"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],[1,"modal-body","d-flex","justify-content-center","align-items-center","position-relative"],[1,"btn","btn-light","position-absolute","start-0","top-50","translate-middle-y","ms-3",3,"click"],[1,"fa-solid","fa-chevron-left"],[1,"img-fluid","rounded",2,"max-height","90vh",3,"src"],[1,"btn","btn-light","position-absolute","end-0","top-50","translate-middle-y","me-3",3,"click"],[1,"fa-solid","fa-chevron-right"],[1,"row","mb-5","gy-4","gy-lg-0"],[1,"col-md-8","bg-white","rounded","p-3"],["class","col-md-4",4,"ngIf"],["class","mb-5",4,"ngIf"],[1,"rating","ms-auto"],[4,"ngFor","ngForOf"],["class","fa-solid fa-star text-warning",4,"ngIf"],["class","fa-solid fa-star-half-stroke text-warning",4,"ngIf"],["class","fa-regular fa-star text-warning",4,"ngIf"],[1,"fa-solid","fa-star","text-warning"],[1,"fa-solid","fa-star-half-stroke","text-warning"],[1,"fa-regular","fa-star","text-warning"],[1,"col-6"],["alt","Autre photo",1,"img-fixed",3,"click","src"],[1,"col-6","col-md-4"],["alt","Photo",1,"img-fluid","rounded","shadow-sm","cursor-pointer",3,"click","src"],[1,"col-md-4"],[1,"card","text-center","p-3","host-card"],["alt","Photo h\xF4te",1,"mx-auto","mb-2",3,"src"],[1,"text-success"],[1,"fa-solid","fa-circle-check","me-1"],[1,"d-grid","gap-2"],[3,"owner","house"],[1,"mb-5"],[1,"mb-3"],[1,"row"],[1,"col-md-10","col-lg-8"],[1,"list-unstyled","row","row-cols-1","row-cols-sm-2","g-2"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"text-primary","me-3","fs-5",3,"ngClass"],[1,"text-dark"]],template:function(t,i){t&1&&(g(0,Ci,52,17,"div",0),M(1,"async")),t&2&&d("ngIf",O(1,1,i.house$))},dependencies:[$,pe,G,st,Ot,_e],styles:[`.rating[_ngcontent-%COMP%]{color:gold;font-size:1.2rem}.host-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%}.btn-view-all[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.img-fixed[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:.5rem}ul[_ngcontent-%COMP%]{padding-left:0}li[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.imgP[_ngcontent-%COMP%]{max-height:400px;width:100%;object-fit:cover}
/*# sourceMappingURL=/house-details.component-SU7XBJZH.css.map */`]})}return n})();function Ni(n,r){if(n&1){let e=y();o(0,"div")(1,"input",24),m("change",function(i){let a=_(e).index,u=p();return f(u.onFileChange(i,a))}),s(),o(2,"button",19),m("click",function(){let i=_(e).index,a=p();return f(a.removeImageUrl(i))}),l(3,"Supprimer"),s()()}}function Bi(n,r){if(n&1){let e=y();o(0,"div"),h(1,"input",25),o(2,"button",19),m("click",function(){let i=_(e).index,a=p();return f(a.removeEquipement(i))}),l(3,"Supprimer"),s()()}if(n&2){let e=r.index;c(),d("formControlName",e)}}var Bt=(()=>{class n{fb;ownerservice;houseservice;addHouseForm$;Owners$;constructor(e,t,i){this.fb=e,this.ownerservice=t,this.houseservice=i}ngOnInit(){this.addHouseForm$=this.fb.group({title:["",w.required],description:["",w.required],price:[0,[w.required,w.min(0)]],type:["",w.required],rooms:[1,[w.required,w.min(1)]],imageUrl:this.fb.array([],w.required),equipements:this.fb.array([],w.required),city:["",w.required],neighboorhood:["",w.required],idOwner:["",w.required]})}get imageUrlArray(){return this.addHouseForm$.get("imageUrl")}get equipementsArray(){return this.addHouseForm$.get("equipements")}addImageUrl(){this.imageUrlArray.push(this.fb.control(null,w.required))}onFileChange(e,t){let i=e.target.files[0];i&&this.imageUrlArray.at(t).setValue(i)}removeImageUrl(e){this.imageUrlArray.removeAt(e)}addEquipement(){this.equipementsArray.push(this.fb.control("",w.required))}removeEquipement(e){this.equipementsArray.removeAt(e)}onSubmit(){if(this.addHouseForm$.invalid){this.addHouseForm$.markAllAsTouched();return}let e=new FormData;e.append("title",this.addHouseForm$.get("title")?.value),e.append("description",this.addHouseForm$.get("description")?.value),e.append("price",this.addHouseForm$.get("price")?.value),e.append("type",this.addHouseForm$.get("type")?.value),e.append("rooms",this.addHouseForm$.get("rooms")?.value),e.append("city",this.addHouseForm$.get("city")?.value),e.append("neighboorhood",this.addHouseForm$.get("neighboorhood")?.value),e.append("idOwner",this.addHouseForm$.get("idOwner")?.value),this.imageUrlArray.controls.forEach(i=>{let a=i.value;a instanceof File&&e.append("imageUrl",a)});let t=this.equipementsArray.value;e.append("equipements",JSON.stringify(t)),this.houseservice.addHouse(e).subscribe({next:i=>{console.log("Maison cr\xE9\xE9e :",i),this.addHouseForm$.reset(),this.imageUrlArray.clear(),this.equipementsArray.clear()},error:i=>{console.error("Erreur cr\xE9ation maison :",i)}})}static \u0275fac=function(t){return new(t||n)(S(mt),S(De),S(W))};static \u0275cmp=T({type:n,selectors:[["app-add-house"]],decls:48,vars:3,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title"],["type","text","id","title","formControlName","title",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","5",1,"form-control"],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["for","type"],["type","text","id","type","formControlName","type",1,"form-control"],["for","neighboorhood"],["type","text","id","neighboorhood","formControlName","neighboorhood",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],["for","rooms"],["type","number","id","rooms","formControlName","rooms",1,"form-control"],["formArrayName","imageUrl",1,"mb-3"],[4,"ngFor","ngForOf"],["type","button",3,"click"],["formArrayName","equipements",1,"mb-3"],["for","idOwner"],["type","text","id","idOwner","formControlName","idOwner",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","file",3,"change"],["placeholder","Nom de l'\xE9quipement",1,"form-control",3,"formControlName"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"form",1),m("ngSubmit",function(){return i.onSubmit()}),o(2,"div",2)(3,"label",3),l(4,"Titre"),s(),h(5,"input",4),s(),o(6,"div",2)(7,"label",5),l(8,"Description"),s(),h(9,"textarea",6),s(),o(10,"div",2)(11,"label",7),l(12,"Prix"),s(),h(13,"input",8),s(),o(14,"div",2)(15,"label",9),l(16,"Type"),s(),h(17,"input",10),s(),o(18,"div",2)(19,"label",11),l(20,"Quartier"),s(),h(21,"input",12),s(),o(22,"div",2)(23,"label",13),l(24,"Ville"),s(),h(25,"input",14),s(),o(26,"div",2)(27,"label",15),l(28,"Nombre de chambres"),s(),h(29,"input",16),s(),o(30,"div",17)(31,"label"),l(32,"Images"),s(),g(33,Ni,4,0,"div",18),o(34,"button",19),m("click",function(){return i.addImageUrl()}),l(35,"Ajouter une image"),s()(),o(36,"div",20)(37,"label"),l(38,"\xC9quipements"),s(),g(39,Bi,4,1,"div",18),o(40,"button",19),m("click",function(){return i.addEquipement()}),l(41,"Ajouter un \xE9quipement"),s()(),o(42,"div",2)(43,"label",21),l(44,"ID du propri\xE9taire"),s(),h(45,"input",22),s(),o(46,"button",23),l(47,"Ajouter la maison"),s()()()),t&2&&(c(),d("formGroup",i.addHouseForm$),c(32),d("ngForOf",i.imageUrlArray.controls),c(6),d("ngForOf",i.equipementsArray.controls))},dependencies:[bt,ve,me,ye,ge,be,dt,ht,ut,G],encapsulation:2})}return n})();var xi=[{path:"",component:yt},{path:"add",component:Bt},{path:":id",component:Nt}],xt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=X({type:n});static \u0275inj=J({imports:[Le.forChild(xi),Le]})}return n})();var Eo=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=X({type:n});static \u0275inj=J({imports:[j,xt]})}return n})();export{Eo as HouseModule};
//# sourceMappingURL=chunk-RZGB6H6I.js.map
